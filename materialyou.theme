<?php

/**
 * Material You Theme
 *
 * @author Attila NÃ©meth
 * 13.03.2022
 */

use Drupal\Core\Form\FormStateInterface;
use Drupal\Core\Template\Attribute;

/**
 * Implements hook_form_FORM_ID_alter()
 */
function materialyou_form_system_theme_settings_alter(&$form, FormStateInterface $form_state)
{
  $form['materialyou'] = [
    '#type' => 'details',
    '#open' => true,
    '#title' => t('Material You'),
    'colors' => [
      '#type' => 'select',
      '#title' => t('Colors'),
      '#default_value' => theme_get_setting('colors'),
      '#required' => true,
      '#options' => [
        'default'     => t('Default'),
        'red'         => t('Red'),
        'green'       => t('Green'),
        'blue'        => t('Blue'),
        'orange'      => t('Orange'),
      ],
    ],
  ];
}

function materialyou_preprocess_html(&$variables)
{
  $variables['attributes']['class'][] = 'material-colors-' . theme_get_setting('colors');
}

/**
 * Implements hook_preprocess_HOOK()
 */
function materialyou_preprocess_page(&$variables): void
{
  $variables['header_attributes'] = new Attribute();
}

/**
 * Implements hook_preprocess_HOOK()
 */
function materialyou_preprocess_input(&$variables): void
{
  if ($variables['element']['#type'] === 'submit') {
    $variables['attributes']['class'][] = 'materialyou-button';
    $variables['attributes']['class'][] = 'materialyou-submit-button';
  }
}